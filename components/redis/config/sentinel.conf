# ==============================================================================
# Redis Sentinel Configuration (Base)
# ==============================================================================

# ------------------------------------------------------------------------------
# Networking
# ------------------------------------------------------------------------------

# Sentinel port.
port 26379

# Working directory.
dir /tmp

# ------------------------------------------------------------------------------
# Hostname / DNS
# ------------------------------------------------------------------------------

# Resolve hostnames to IPs. Required for Kubernetes headless services.
sentinel resolve-hostnames yes

# Announce hostnames instead of IPs.
sentinel announce-hostnames yes

# ------------------------------------------------------------------------------
# Monitoring & Failover
# ------------------------------------------------------------------------------

# Note: The 'sentinel monitor' line is defined in 'sentinel-custom.conf'
# to allow overlays to customize the quorum size.

# Time (ms) before a master is considered down.
sentinel down-after-milliseconds mymaster 5000

# Number of replicas to re-sync simultaneously after failover.
sentinel parallel-syncs mymaster 1

# Max time (ms) for failover completion.
sentinel failover-timeout mymaster 10000

# ------------------------------------------------------------------------------
# Security
# ------------------------------------------------------------------------------

# Prevent runtime configuration changes via CONFIG command.
sentinel deny-scripts-reconfig yes

# ------------------------------------------------------------------------------
# Includes (Hooks)
# ------------------------------------------------------------------------------

# ACL configuration (generated by init container).
include /etc/redis/sentinel-auth.conf

# Custom configuration for environment-specific overrides.
include /etc/redis/sentinel-custom.conf